你这个场景（Vue2 升级 Vue3 + webpack）里，methods 里写 JSX 常见报错基本就两类：
	1.	Unexpected token < / 解析 <div> 报错 → JSX 没有被 Babel 转换
	2.	能编译但运行/渲染不对 → 你在 template 里“调用 methods 返回 VNode”，Vue 不会自动把它当 DOM 渲染

下面按“升级项目最常见”的方式给你一套 webpack 配置与代码落地方案。

⸻

一、Vue2 的 JSX 插件不能继续用（必须换）

Vue2 常用的是 babel-plugin-transform-vue-jsx（官方仓库就写了它是 Vue 2 JSX 插件） ￼
升级到 Vue3 后，要换成 @vue/babel-plugin-jsx（Vue 3 JSX） ￼

✅ 安装（Vue3 + webpack）

npm i -D @vue/babel-plugin-jsx

然后在 babel.config.js / .babelrc：

module.exports = {
  plugins: ['@vue/babel-plugin-jsx'],
}

如果你项目之前装过 babel-plugin-transform-vue-jsx / @vue/babel-preset-jsx，建议删掉避免冲突。

⸻

二、Vue3 + webpack 的 loader 版本要对

Vue3 的 SFC 编译需要 vue-loader v16 + @vue/compiler-sfc（而 Vue2 是 vue-loader v15 + vue-template-compiler） ￼
很多升级报错就卡在这里。

✅ 依赖（核心）

npm i vue@^3 @vue/compiler-sfc -S
npm i -D vue-loader@^16 webpack@^5 webpack-cli vue-style-loader css-loader babel-loader @babel/core

如果你还在 webpack4，基本也要升到 webpack5（vue-loader v16 生态普遍按 webpack5 来配）。

✅ webpack 配置关键片段

const { VueLoaderPlugin } = require('vue-loader')

module.exports = {
  module: {
    rules: [
      { test: /\.vue$/, loader: 'vue-loader' },
      {
        test: /\.(js|jsx)$/,
        exclude: /node_modules/,
        use: 'babel-loader'
      }
    ]
  },
  resolve: {
    extensions: ['.js', '.jsx', '.vue'],
  },
  plugins: [new VueLoaderPlugin()]
}


⸻

三、你现在这段代码“编译通过”的正确使用方式

你写的：

methods: {
  buttonRender() { return <div>test</div> }
}

✅ 这没问题（只要 JSX 配好）。
但它返回的是 VNode，必须在 render/JSX 环境里消费，不能在 <template> 里 {{ buttonRender() }} 这样用。

✅ 最稳：把真正的 render 写在根级，然后调用 methods

（你仍然可以保留 methods 里的“分块渲染”）

<script lang="jsx">
export default {
  name: "test",
  methods: {
    test() { console.log("test") },
    buttonRender() { return <div>button</div> },
    linkRender() { return <div>link</div> },
    emailRender() { return <div>email</div> },
  },
  render() {
    return (
      <div>
        {this.buttonRender()}
        {this.linkRender()}
        {this.emailRender()}
      </div>
    )
  }
}
</script>

重点：render() 不要放 methods 里，要和 methods 同级（Vue 才会把它当组件渲染函数）。

⸻

四、如果你想继续用 <template>：别用 methods 返回 JSX，改成子组件

这是 Vue 风格更一致、升级坑更少的方式：

<template>
  <div>
    <ButtonRender />
    <LinkRender />
    <EmailRender />
  </div>
</template>

<script lang="jsx">
const ButtonRender = { render: () => <div>button</div> }
const LinkRender = { render: () => <div>link</div> }
const EmailRender = { render: () => <div>email</div> }

export default {
  components: { ButtonRender, LinkRender, EmailRender }
}
</script>


⸻

五、快速定位你现在到底是哪种报错

你把报错信息贴出来我能直接对症下药，不过你也可以先按这个判断：
	•	报 “Unexpected token <”：就是 JSX 没走 babel（优先查 babel-loader 是否匹配到了 .js/.jsx，以及有没有 @vue/babel-plugin-jsx） ￼
	•	报 “Cannot find module ‘vue/compiler-sfc’”：就是 Vue3 依赖/loader 版本不匹配（要装 @vue/compiler-sfc 并用 vue-loader v16） ￼

⸻

把你现在的具体报错全文（从第一行到最后一行）+ 你项目的 webpack.config 里 module.rules 对 js 的配置 粘一下，我就能告诉你是哪一项没配对，以及怎么改到不再报错。