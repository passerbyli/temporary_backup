好的，我们用中文来处理你遇到的两个问题。

1) git-cz 找不到 cz-git（Commitizen 适配器）

原因： 使用 pnpm 时，如果在配置里写了类似 node_modules/cz-git 的硬路径，pnpm 的非扁平 node_modules 结构会导致 require() 失败。

推荐修复：
	1.	本地安装：
```
pnpm add -D commitizen cz-git
```
	2.	在 package.json 用包名配置，不要写硬路径：
```
{
  "scripts": {
    "commit": "git-cz"
  },
  "config": {
    "commitizen": {
      "path": "cz-git"
    },
    "cz-git": {
      "alias": { "feat": "feat: ✨", "fix": "fix: 🐛" }
    }
  }
}
```
如果你想显式到入口文件，也可以用："path": "cz-git/lib/cjs/index.js"。

	3.	运行：
```
pnpm commit
# 或
pnpm dlx git-cz
```
仍报错时： 清理并重装依赖（Windows 命令行/CMD）：
```
rd /s /q node_modules
del /f /q pnpm-lock.yaml
pnpm i
```
（可选）若团队里很多旧工具依赖扁平结构，可启用：
```
pnpm config set shamefully-hoist true
pnpm i
```
2) lint-staged could not find any staged files.

原因： pre-commit 钩子运行了 lint-staged，但没有暂存文件，或匹配的 glob 不对。

快速解决：
	•	先暂存再提交：
```
git add -A
pnpm commit
```

	•	确认 lint-staged 的 glob 能匹配到你改的文件，比如：
```
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"],
    "*.json": ["prettier --write"]
  }
}
```


防呆（无暂存文件就跳过）： 在 .husky/pre-commit 加守卫：
```
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

if [ -n "$(git diff --name-only --cached)" ]; then
  pnpm lint-staged
else
  echo "No staged files; skipping lint-staged."
fi
```
另外，新版 lint-staged 用 pnpm lint-staged --quiet 也会只给提示并成功退出；老版本不一定，请优先用上面的守卫。

⸻

快速检查清单
	•	pnpm add -D commitizen cz-git
	•	package.json 里 config.commitizen.path = "cz-git"（不要写 node_modules/...）
	•	git add -A 后再跑 pnpm commit
	•	校对 lint-staged 的 glob
	•	必要时在 .husky/pre-commit 加“无暂存就跳过”的守卫

需要我根据你当前的 package.json（scripts + config）和 .husky/pre-commit 精准改一版的话，把内容贴过来就行。

>-----------


看起来是 PNPM_HOME 没配置，所以 pnpm 不知道把全局可执行文件放哪里，才会报“找不到 global bin”。你在 Windows（从你之前的 D:\... 路径看出来）按下面做就能修好。

一键修复（推荐）

在 PowerShell 里执行：

# 1) 让 pnpm 自动配置全局目录并写入环境变量
pnpm setup

# 2) 重新打开一个新的终端（非常重要）
# 3) 验证
pnpm bin -g

如果返回了一个目录（比如 C:\Users\<你>\AppData\Local\pnpm），并且该目录下会出现你全局安装包的可执行文件，就 OK 了。

⸻

手动修复（如果 pnpm setup 不管用）

仍在 PowerShell 里运行：

# 设定 PNPM_HOME（Windows 官方默认推荐是 LocalAppData\pnpm）
[Environment]::SetEnvironmentVariable("PNPM_HOME", "$env:LOCALAPPDATA\pnpm", "User")

# 追加到 PATH（用户级）
$old = [Environment]::GetEnvironmentVariable("Path", "User")
$new = if ($old -and $old.Trim().EndsWith(";")) { $old + "$env:LOCALAPPDATA\pnpm" } else { "$old;$env:LOCALAPPDATA\pnpm" }
[Environment]::SetEnvironmentVariable("Path", $new, "User")

# 新开一个 PowerShell 窗口后，验证
pnpm bin -g

早期文档有时写成 %APPDATA%\pnpm，现在一般用 %LOCALAPPDATA%\pnpm，两者都能用，但建议统一到 LOCALAPPDATA。

⸻

仍要报错？再检查这几项
	1.	是否通过 Corepack 管理 pnpm（Node 16.13+ 自带）
```
corepack enable
corepack prepare pnpm@latest --activate
pnpm -v
```
	2.	全局可执行目录是否可写（公司电脑或杀软可能拦截）
C:\Users\<你>\AppData\Local\pnpm 应该存在且可写。不存在就手动建一下。
	3.	pnpm 的全局目录是否被改过
```
pnpm config get global-bin-dir
pnpm config get global-dir
```
如果返回是空的或异常，可以重设：
```
pnpm config set global-bin-dir "$env:PNPM_HOME"
```

⸻

避免“全局安装”的替代方案（更稳）

很多 CLI（比如 git-cz）可以直接用 即时执行，不用全局安装：

pnpm dlx git-cz

或在项目里加脚本（团队更可控）：
```
{
  "scripts": {
    "commit": "git-cz"
  },
  "devDependencies": {
    "commitizen": "^4",
    "cz-git": "^1"
  },
  "config": {
    "commitizen": { "path": "cz-git" }
  }
}
```
然后：
```
pnpm add -D commitizen cz-git
pnpm run commit
```

⸻

需要我根据你当前的环境变量、pnpm config 输出帮你对症下药的话，把下面三条命令的输出贴一下：
```
$env:PNPM_HOME
pnpm bin -g
pnpm config list
```